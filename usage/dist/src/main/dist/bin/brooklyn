#!/bin/bash
#
# Brooklyn
#

#set -x # debug

# Get root direcotry of distribution
ROOT=$(cd $(dirname $0)/.. && pwd)

if [ -z "$BROOKLYN_HOME" ] ;
    then BROOKLYN_HOME=$(cd $(dirname $(readlink -f $0 2> /dev/null || readlink $0 2> /dev/null || echo $0))/.. && pwd) ;
fi

# The CLI main class to run
CLASS=brooklyn.cli.Main

# Default memory
if [ -z "${JAVA_OPTS}" ] ; then
    JAVA_OPTS="-Xms256m -Xmx1g -XX:MaxPermSize=256m"
fi

# Set up the environment
CLASSPATH=${ROOT}/lib/*
if [ -n "${BROOKLYN_CLASSPATH}" ]; then
    CLASSPATH="${BROOKLYN_CLASSPATH}:${CLASSPATH}"
fi

JAVA_OPTS="-Dbrooklyn.localhost.address=127.0.0.1 ${JAVA_OPTS}"

# Start Brooklyn
exec java ${JAVA_OPTS} -cp "${CLASSPATH}" ${CLASS} $@
